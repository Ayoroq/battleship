(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],d=i[c]||0,p="".concat(c," ").concat(d);i[c]=d+1;var u=t(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)n[u].references++,n[u].updater(m);else{var h=a(m,r);r.byIndex=s,n.splice(s,0,{identifier:p,updater:h,references:1})}o.push(p)}return o}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=t(i[o]);n[s].references--}for(var l=r(e,a),c=0;c<i.length;c++){var d=t(i[c]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}i=l}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},208:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),a=t.n(r),i=t(314),o=t.n(i)()(a());o.push([e.id,':root {\n  --primary-colour: #d50202;\n}\n\nbody {\n  max-width: 1340px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: black;\n  margin: 0 auto;\n  gap: 2rem;\n}\n\n.header {\n  text-align: center;\n}\n\n.ship-placement-header {\n  display: none;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.ship-placement-title {\n  color: white;\n}\n\n.main {\n  flex: 1;\n  display: flex;\n  gap: 5rem;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 5rem;\n}\n\n/* Loading Screen Styling*/\n.loading-screen {\n  background-color: rgb(0, 0, 0);\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 2rem;\n  animation: fadeOut 1s ease-in-out 5s forwards;\n}\n\n.loading-screen img {\n  max-width: 70vw;\n  max-height: 50vh;\n  object-fit: contain;\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n    display: none;\n  }\n}\n\n.game-name {\n  margin: 3rem 0 0 0;\n  color: var(--primary-colour);\n  font-size: clamp(3rem, 8vw, 8rem);\n}\n\n.loading {\n  color: var(--primary-colour);\n  font-size: 2rem;\n  width: fit-content;\n  font-weight: bold;\n  padding-bottom: 8px;\n  background: linear-gradient(currentColor 0 0) 0 100%/0% 3px no-repeat;\n  animation: l2 5s linear forwards;\n}\n\n@keyframes l2 {\n  to {\n    background-size: 100% 3px;\n  }\n}\n\n/* Game mode  Styling */\n.game-mode-selection-screen {\n  background-color: rgb(0, 0, 0);\n  display: none;\n  align-items: center;\n  justify-content: center;\n  gap: 10rem;\n  animation: fadeIn 1s ease-in-out forwards;\n}\n\n.game-mode-btn {\n  color: white;\n  font-size: 2rem;\n  font-weight: bold;\n  border: none;\n  cursor: pointer;\n  border-radius: 1.5rem;\n  padding: 0%;\n  background: white;\n}\n\n.btn {\n  display: block;\n  border: 2px solid white;\n  border-radius: 1.5rem;\n  padding: 1rem 2rem;\n  background: var(--primary-colour);\n  transform: translateY(-0.3rem);\n  transition: transform 0.1s ease;\n}\n\n.fadeOut {\n  animation: fadeOut 1s ease-in-out forwards;\n}\n\n.game-mode-btn:hover .btn {\n  transform: translateY(-0.5rem);\n}\n\n.game-mode-btn:active .btn {\n  transform: translateY(0);\n}\n\n/* Rules Dialog Styling */\n.ship-placement-screen {\n  background-color: rgb(255, 255, 255);\n  display: none;\n  flex-direction: column;\n  gap: 5rem;\n  animation: fadeIn 1s ease-in-out forwards;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.game-title {\n  color: var(--primary-colour);\n  font-size: 4rem;\n  margin: 0 0 1rem 0;\n  font-weight: bold;\n}\n\n.placement-grid {\n  display: flex;\n}\n\n/* Grid Container Styling */\n.ship-deployment {\n  display: flex;\n  gap: 5rem;\n}\n\n.grid-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  width: 30rem;\n  height: 30rem;\n  position: relative;\n  background-color: white;\n  outline: 1px solid black;\n}\n\n.grid-cell {\n  border: 1px solid black;\n}\n\n.player-deployment {\n  display: flex;\n  gap: 5rem;\n  justify-content: center;\n}\n\n.enemy-deployment {\n  display: none;\n  gap: 5rem;\n}\n\n.space-port,\n.enemy-space-port {\n  display: flex;\n  height: 89%;\n  justify-content: space-evenly;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.ship-class {\n  display: flex;\n  gap: 1rem;\n}\n\n.rotate-ship {\n  background: none;\n  border: none;\n  align-self: center;\n}\n\n.rotate-ship img {\n  width: 1.5rem;\n  cursor: pointer;\n}\n\n/* start and random button styling */\n.button-container {\n  display: flex;\n  gap: 2rem;\n  justify-content: center;\n}\n\n/* Ship styling */\n.ship {\n  display: grid;\n  border: 1px solid black;\n  background-color: rgb(131, 233, 6);\n  cursor: grab;\n  transition: all 0.3s ease;\n  z-index: 10;\n  opacity: 1;\n}\n\n.ship-cell {\n  pointer-events: none;\n}\n\n/* Horizontal ships*/\n.ship[data-ship-size="2"][data-ship-direction="horizontal"] {\n  width: 6rem;\n  height: 3rem;\n}\n.ship[data-ship-size="3"][data-ship-direction="horizontal"] {\n  width: 9rem;\n  height: 3rem;\n}\n.ship[data-ship-size="4"][data-ship-direction="horizontal"] {\n  width: 12rem;\n  height: 3rem;\n}\n.ship[data-ship-size="5"][data-ship-direction="horizontal"] {\n  width: 15rem;\n  height: 3rem;\n}\n\n/* Vertical ships */\n.ship[data-ship-size="2"][data-ship-direction="vertical"] {\n  width: 3rem;\n  height: 6rem;\n}\n.ship[data-ship-size="3"][data-ship-direction="vertical"] {\n  width: 3rem;\n  height: 9rem;\n}\n.ship[data-ship-size="4"][data-ship-direction="vertical"] {\n  width: 3rem;\n  height: 12rem;\n}\n.ship[data-ship-size="5"][data-ship-direction="vertical"] {\n  width: 3rem;\n  height: 15rem;\n}\n\n/* Ship placement preview styling */\n.valid-preview {\n  background-color: rgba(0, 255, 4, 0.5);\n  border: 2px solid #00ff04;\n}\n\n.invalid-preview {\n  background-color: rgba(255, 0, 0, 0.5);\n  border: 2px solid #ff0000;\n}\n\n/* Attack result styling */\n.grid-cell {\n  cursor: crosshair;\n}\n\n.grid-cell.hit {\n  background-color: red;\n}\n\n.grid-cell.miss {\n  background-color: lightblue;\n}\n\n.finish {\n  position: absolute;\n  padding: 2rem 4rem;\n  top: 50%;\n  left: 50%;\n  border-radius: 1.5rem;\n  transform: translate(-50%, -50%);\n  background-color: white;\n  z-index: 1000;\n}\n\n.finish .container {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.winner {\n  font-size: clamp(2rem, 4vw, 3rem);\n  font-weight: bold;\n  text-align: center;\n}\n\n.name-screen {\n  padding: 5rem;\n  display: none;\n}\n\n.name-container {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  align-items: center;\n}\n\n.name-form {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.name-form input {\n  padding: 1rem;\n  font-size: 2rem;\n  border: none;\n  border-bottom: 2px solid black;\n  text-align: center;\n  outline: none;\n}\n\n.clickable {\n  padding: 0.5rem 2rem;\n  border-radius: 0.5rem;\n  font-size: 1rem;\n  font-weight: bold;\n  color: white;\n  background: var(--primary-colour);\n  border: 2px solid var(--primary-colour);\n  box-shadow: 0 4px 0 darkred;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  transform: translateY(-2px);\n}\n.clickable:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 6px 0 darkred;\n}\n.clickable:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 0 darkred;\n}\n\n.user-ship-placement {\n  display: none;\n}\n\n.user,\n.current-player-turn {\n  padding-top: 2rem;\n}\n\n.text {\n  font-size: 2.5rem;\n  font-weight: bold;\n  text-transform: uppercase;\n  text-align: center;\n}\n\n.turns-controller {\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n/* styling for the rules dialog */\n.rules-dialog {\n  position: absolute;\n  top: 55%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 2px solid var(--primary-colour);\n  padding: 0;\n  z-index: 1000;\n  border-radius: 2rem;\n}\n\n.rules-dialog::backdrop,\n.finish::backdrop {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.rules-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  padding: 1rem;\n  width: 90vw;\n  max-width: 600px;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.rules-header {\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  align-items: center;\n}\n\n.rules-title {\n  grid-column: 2;\n  text-align: center;\n}\n\n.close-btn {\n  padding: 0;\n  border: none;\n  background: none;\n  font-size: xx-large;\n  margin-left: auto;\n  cursor: pointer;\n}\n\n.rules-content {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.green {\n  outline: none;\n  background-color: #059508;\n  border-color: #059508;\n  box-shadow: 0 4px 0 darkgreen;\n}\n.green:hover {\n  box-shadow: 0 6px 0 darkgreen;\n}\n.green:active {\n  box-shadow: 0 2px 0 darkgreen;\n}\n\n.blue {\n  outline: none;\n  background-color: #0066ff;\n  border-color: #0066ff;\n  box-shadow: 0 4px 0 darkblue;\n}\n.blue:hover {\n  box-shadow: 0 6px 0 darkblue;\n}\n.blue:active {\n  box-shadow: 0 2px 0 darkblue;\n}\n\n.pass-device-dialog {\n  position: absolute;\n  padding: 7rem 10rem;\n  top: 60%;\n  left: 50%;\n  border-radius: 1.5rem;\n  transform: translate(-50%, -50%);\n  background-color: white;\n  z-index: 2000;\n}\n\n.pass-device-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  text-align: center;\n  font-size: clamp(2rem, 5vw, 3.5rem);\n}\n\n.after {\n  display: flex;\n  gap: 2rem;\n}\n',""]);const s=o},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},430:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),a=t.n(r),i=t(314),o=t.n(i)()(a());o.push([e.id,"/*\n  Josh's Custom CSS Reset\n  https://www.joshwcomeau.com/css/custom-css-reset/\n*/\n\n*, *::before, *::after {\n  box-sizing: border-box;\n}\n\n* {\n  margin: 0;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  html {\n    interpolate-size: allow-keywords;\n  }\n}\n\nbody {\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n}\n\nimg, picture, video, canvas, svg {\n  display: block;\n  max-width: 100%;\n}\n\ninput, button, textarea, select {\n  font: inherit;\n}\n\np, h1, h2, h3, h4, h5, h6 {\n  overflow-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\nh1, h2, h3, h4, h5, h6 {\n  text-wrap: balance;\n}\n\n#root, #__next {\n  isolation: isolate;\n}",""]);const s=o},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.nc=void 0;var r=t(72),a=t.n(r),i=t(825),o=t.n(i),s=t(659),l=t.n(s),c=t(56),d=t.n(c),p=t(540),u=t.n(p),m=t(113),h=t.n(m),y=t(430),g={};g.styleTagTransform=h(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),a()(y.A,g),y.A&&y.A.locals&&y.A.locals;var f=t(208),b={};b.styleTagTransform=h(),b.setAttributes=d(),b.insert=l().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=u(),a()(f.A,b),f.A&&f.A.locals&&f.A.locals;class v{constructor(e,n,t=0,r=!1){this.name=e,this.length=n,this.hits=t,this.sunk=r}hit(){this.hits++}isSunk(){return this.hits>=this.length&&(this.sunk=!0),this.sunk}}class x{constructor(e=10){this.boardSize=e,this.MAX_SHIP_LENGTH=5,this.board=Array.from({length:this.boardSize},()=>Array(this.boardSize).fill(null)),this.ships=[],this.shipPlacements=new Map}validateShip(e){return!("number"!=typeof e.length||e.length<1||"string"!=typeof e.name||0===e.name.length||e.length>this.MAX_SHIP_LENGTH)}validatePlacement(e,n,t,r){if(!this.validateShip(e))return!1;if(n<0||n>=this.boardSize||t<0||t>=this.boardSize)return!1;if("horizontal"!==r&&"vertical"!==r)return!1;if("horizontal"===r){if(t+e.length>this.boardSize)return!1;for(let r=0;r<e.length;r++)if(null!==this.board[n][t+r])return!1}else{if(n+e.length>this.boardSize)return!1;for(let r=0;r<e.length;r++)if(null!==this.board[n+r][t])return!1}return!0}placeShip(e,n,t,r){if(this.validatePlacement(e,n,t,r))if(this.ships.push(e),this.shipPlacements.set(e,{x:n,y:t,direction:r}),"horizontal"===r)for(let r=0;r<e.length;r++)this.board[n][t+r]=e;else for(let r=0;r<e.length;r++)this.board[n+r][t]=e}removeShip(e){for(let n=0;n<this.boardSize;n++)for(let t=0;t<this.boardSize;t++)this.board[n][t]===e&&(this.board[n][t]=null);const n=this.ships.indexOf(e);-1!==n&&this.ships.splice(n,1)}getShipAt(e,n){return this.board[e][n]}resetBoard(){this.board=Array.from({length:this.boardSize},()=>Array(this.boardSize).fill(null)),this.ships=[]}receiveAttack(e,n){if(null!==this.board[e][n]&&"hit"!==this.board[e][n]&&"miss"!==this.board[e][n]){const t=this.board[e][n];t.hit();const r=this.shipPlacements.get(t);let a=0;return r&&(a="horizontal"===r.direction?n-r.y:e-r.x),this.board[e][n]="hit",{result:"hit",ship:t,cellIndex:a}}return"hit"===this.board[e][n]||"miss"===this.board[e][n]?{result:"already_attacked"}:(this.board[e][n]="miss",{result:"miss"})}allShipsSunk(){return this.ships.length>0&&this.ships.every(e=>e.isSunk())}placeShipsRandomly(e){for(const n of e){let e=!1,t=0;const r=100;for(;!e&&t<r;){const r=Math.floor(Math.random()*this.boardSize),a=Math.floor(Math.random()*this.boardSize),i=Math.random()<.5?"horizontal":"vertical";this.validatePlacement(n,r,a,i)&&(this.placeShip(n,r,a,i),e=!0),t++}}}getShipPlacements(){const e=[];return this.ships.forEach(n=>{const t=this.shipPlacements.get(n);t&&e.push({ship:n,x:t.x,y:t.y,direction:t.direction})}),e}}function S(e,n,t){const{ship:r,x:a,y:i,direction:o}=e,s=document.createElement("div");s.classList.add("ship"),s.setAttribute("data-ship-name",r.name),s.setAttribute("data-ship-size",r.length),s.setAttribute("data-ship-direction",o),s.draggable=!0,s.style.position="absolute",s.style.left=3*i+"rem",s.style.top=3*a+"rem",s.style.gridTemplate="horizontal"===o?`1fr / repeat(${r.length}, 1fr)`:`repeat(${r.length}, 1fr) / 1fr`;for(let e=0;e<r.length;e++){const n=document.createElement("div");n.classList.add("ship-cell"),n.setAttribute("data-cell-index",e),s.appendChild(n)}if(s.setAttribute("grid-row",a),s.setAttribute("grid-col",i),n.appendChild(s),t){const e=t.querySelector(`[data-ship-name="${r.name}"]`);e&&(e.style.display="none")}}const w=[{name:"Dreadnought",size:5},{name:"Battlecruiser",size:4},{name:"Heavy Cruiser",size:3},{name:"Stealth Frigate",size:3},{name:"Interceptor",size:2}];let k=null,z=null,C=!1;const D=document.querySelector(".start-btn");function L(e){return 5===e.ships.length}function A(e){const n=L(e);if(window.handleShipPlacementComplete&&window.handleShipPlacementComplete(n),window.buttonsToDisplay&&window.buttonsToDisplay(),n){const e=document.querySelector(".space-port, .enemy-space-port");if(e){const n=e.closest(".ship-placement, .enemy-ship-placement");n&&n.remove()}}return n}D&&(D.style.display="none");const P=e=>{for(let n=0;n<100;n++){const t=document.createElement("div");t.classList.add("grid-cell"),t.dataset.x=Math.floor(n/10),t.dataset.y=n%10,t.style.width="3rem",t.style.height="3rem",e.appendChild(t)}};function T(e,n,t,r,a){return a.validatePlacement(e,n,t,r)}function E(e){e.addEventListener("click",e=>{const n=e.target.closest(".rotate-ship");if(n){const e=n.previousElementSibling;if(e&&e.classList.contains("ship")){const n="horizontal"===e.getAttribute("data-ship-direction")?"vertical":"horizontal";e.setAttribute("data-ship-direction",n)}}})}function M(e,n,t,r){e.addEventListener("click",()=>{5===n.ships.length||0===n.ships.length?(n.resetBoard(),function(e,n){e.querySelectorAll(".ship").forEach(e=>e.remove());n.querySelectorAll('.ship[style*="display: none"]').forEach(e=>e.style.display="")}(t,r),function(e,n,t=null){const r=w.map(e=>new v(e.name,e.size));e.placeShipsRandomly(r);e.getShipPlacements().forEach(e=>S(e,n,t)),A(e)}(n,t)):function(e,n,t=null){const r=e.getShipPlacements(),a=w.filter(e=>!r.some(n=>n.ship.name===e.name)),i=a.map(e=>new v(e.name,e.size));e.placeShipsRandomly(i);e.getShipPlacements().filter(e=>a.some(n=>n.name===e.ship.name)).forEach(e=>S(e,n,t)),A(e)}(n,t);const e=r.closest(".ship-placement, .enemy-ship-placement");e&&e.remove()})}function N(e){e.querySelectorAll(".ship-preview, .invalid-preview").forEach(e=>e.remove())}function B(e,n){const t=n.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,i=t.width/10,o=Math.floor(a/i),s=Math.floor(r/i),l=parseInt(k.getAttribute("data-ship-size")),c=k.getAttribute("data-ship-direction");let d,p;return"horizontal"===c?(d=o,p=s-z):(d=o-z,p=s),{shipStartX:d,shipStartY:p,shipSize:l,shipDirection:c}}function I(e){if(e.target.classList.contains("ship")){const n=e.target,t=n.getBoundingClientRect(),r=parseInt(n.getAttribute("data-ship-size")),a=n.getAttribute("data-ship-direction"),i=e.clientX-t.left,o=e.clientY-t.top;if("horizontal"===a){const e=t.width/r;return Math.floor(i/e)}{const e=t.height/r;return Math.floor(o/e)}}return null}function q(e,n){e.addEventListener("dblclick",e=>{if(e.target.classList.contains("ship")){console.log("Double-clicked ship for rotation");const t=e.target,r=t.getAttribute("data-ship-name"),a=t.getAttribute("data-ship-direction"),i="horizontal"===a?"vertical":"horizontal",o=parseInt(t.getAttribute("grid-row")),s=parseInt(t.getAttribute("grid-col")),l=parseInt(t.getAttribute("data-ship-size")),c=n.ships.find(e=>e.name===r);c&&n.removeShip(c);const d=new v(r,l);if(T(d,o,s,i,n))n.placeShip(d,o,s,i),t.setAttribute("data-ship-direction",i),t.style.gridTemplate="horizontal"===i?`1fr / repeat(${l}, 1fr)`:`repeat(${l}, 1fr) / 1fr`;else{n.placeShip(c,o,s,a);const e=t.style.backgroundColor;t.style.backgroundColor="red",setTimeout(()=>{t.style.backgroundColor=e},200)}}})}function $(e,n,t){e.addEventListener("dragstart",e=>{e.target.classList.contains("ship")&&(e.target.style.opacity="0.5",k=e.target,z=I(e),C=!0,e.dataTransfer.setData("text/plain",e.target.outerHTML))}),e.addEventListener("dragend",e=>{e.target.classList.contains("ship")&&("none"!==e.target.style.display&&(e.target.style.opacity="1"),k=null,z=null,C=!1,N(n))}),n.addEventListener("dragstart",e=>{if(e.target.classList.contains("ship")){e.target.style.opacity="0.5",k=e.target,z=I(e),C=!1;const n=e.target.getAttribute("data-ship-name"),r=t.ships.find(e=>e.name===n);r&&t.removeShip(r),e.dataTransfer.setData("text/plain",e.target.outerHTML)}}),n.addEventListener("dragend",e=>{e.target.classList.contains("ship")&&(e.target.style.opacity="1",k=null,z=null,C=!1,N(n))}),n.addEventListener("dragover",e=>{if(e.preventDefault(),!k)return;N(n);const{shipStartX:r,shipStartY:a,shipSize:i,shipDirection:o}=B(e,n),s=k.getAttribute("data-ship-name");!function(e,n,t,r,a,i){const o=a?"ship-preview":"invalid-preview";for(let s=0;s<t;s++){let t,l;if("horizontal"===r?(t=e,l=n+s):(t=e+s,l=n),t>=0&&t<10&&l>=0&&l<10){const e=document.createElement("div");e.classList.add(o),e.style.position="absolute",e.style.left=3*l+"rem",e.style.top=3*t+"rem",e.style.width="3rem",e.style.height="3rem",e.style.pointerEvents="none",e.style.zIndex="5",a?e.classList.add("valid-preview"):e.classList.add("invalid-preview"),e.style.border=a?"2px solid green":"2px solid red",i.appendChild(e)}}}(r,a,i,o,T(new v(s,i),r,a,o,t),n)}),n.addEventListener("drop",r=>{if(r.preventDefault(),!k)return;const{shipStartX:a,shipStartY:i,shipSize:o,shipDirection:s}=B(r,n),l=k.getAttribute("data-ship-name"),c=new v(l,o);if(T(c,a,i,s,t))if(t.placeShip(c,a,i,s),A(t),C){S({ship:c,x:a,y:i,direction:s},n,k.parentElement);const t=e.querySelector(`[data-ship-name="${l}"]`);t&&(t.closest(".ship-class").style.display="none")}else k.style.left=3*i+"rem",k.style.top=3*a+"rem",k.setAttribute("data-ship-direction",s),k.setAttribute("grid-row",a),k.setAttribute("grid-col",i);else if(k.style.opacity="1",k.parentElement===n){const e=parseInt(k.getAttribute("grid-row")),n=parseInt(k.getAttribute("grid-col")),r=k.getAttribute("data-ship-direction");t.placeShip(c,e,n,r)}})}function H(e,n,t){const r=e.querySelector(`[data-ship-name="${n.name}"]`);if(r){const e=r.querySelector(`[data-cell-index="${t}"]`);e&&(e.style.backgroundColor="red",e.classList.add("hit"))}}const R=t.p+"0318bfb7c1037aa6bc68.svg";let j=!1,G=null,Y=null;function _(e){const n=document.querySelector(e);return n||console.warn(`Element not found: ${e}`),n}function O(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function X(){if("undefined"==typeof confetti)return void console.error("Confetti library not loaded");const e=Date.now()+5e3,n={startVelocity:30,spread:360,ticks:60,zIndex:99999},t=(e,n)=>Math.random()*(n-e)+e;Y=setInterval(()=>{const r=e-Date.now();if(r<=0)return void clearInterval(Y);const a=r/5e3*50;confetti({...n,particleCount:a,origin:{x:t(.1,.3),y:.3*Math.random()+.1}}),confetti({...n,particleCount:a,origin:{x:t(.7,.9),y:.3*Math.random()+.1}})},250)}function F(){if(!G)return;const e=j?G.player1?.gameBoard:G.player?.gameBoard,n=j?G.player2()?.gameBoard:G.enemy?.gameBoard;if(!e)return;const t=_(".player-deployment"),r=_(".enemy-deployment"),a=t?t.querySelector(".start-btn"):null,i=(r&&r.querySelector(".start-btn"),L(e)),o=!j||L(n);if(j){if(j&&i&&!o){const e=_(".button-container");if(e&&!e.querySelector(".pass-to-p2-btn")){const n=document.createElement("div");n.classList.add("pass-to-p2-btn"),n.innerHTML='<button class="clickable blue" type="button">Pass to Player 2</button>',e.appendChild(n)}}}else a&&(a.style.display=i?"block":"none");if(j&&i&&o){const e=t?t.querySelector(".start-game"):null;e&&e.remove();const n=_(".enemy-deployment .button-container");if(n&&!n.querySelector(".start-game")){const e=document.createElement("div");e.classList.add("start-game"),e.innerHTML='<button class="start-btn clickable green" type="button">Start Game</button>',n.appendChild(e)}}}function U(e,n){j?(G=function(e,n,t){const r=function(){const e=document.querySelector(".space-port"),n=document.querySelector(".grid-container-player"),t=new x,r=document.querySelector(".random-placement-btn");return E(e),M(r,t,n,e),$(e,n,t),q(n,t),P(n),{gameBoard:t,gridContainer:n,spacePort:e}}();let a=!1,i=n.player1Name,o=!1;const s={gameBoard:new x,gridContainer:null};function l(){if(r.gameBoard.allShipsSunk()?(u(n.player2Name),1):s.gameBoard.allShipsSunk()&&(u(n.player1Name),1))return;if(!a)return;const e=i===n.player1Name?n.player2Name:n.player1Name;c(e,()=>{i=e,d(),p()})}function c(n,t){const r=document.querySelector(".player-deployment"),a=document.querySelector(".enemy-deployment");r&&(r.style.display="none"),a&&(a.style.display="none"),e.passDeviceDialog?(e.passDeviceText.textContent=`Pass the device to ${n}`,e.passDeviceDialog.showModal(),e.passDeviceBtn.onclick=()=>{e.passDeviceDialog.close(),t(),o=!1,e.passDeviceBtn.onclick=null}):t()}function d(){e.currentPlayerTurn&&(e.currentPlayerTurn.textContent=`${i}'s turn`)}function p(){const e=document.querySelector(".player-deployment"),t=document.querySelector(".enemy-deployment");i===n.player1Name?(e&&(e.style.display="none"),t&&(t.style.display="flex")):(t&&(t.style.display="none"),e&&(e.style.display="flex"))}function u(n){a=!1,e.winnerDisplay&&e.winnerDialog&&(e.winnerDisplay.textContent=`${n} wins!`,e.winnerDialog.showModal()),n&&t&&t()}return function(){const r=document.querySelector(".forfeit-btn");r&&r.addEventListener("click",()=>{a=!1;const r=i===n.player1Name?n.player2Name:n.player1Name;e.winnerDisplay&&e.winnerDialog&&(e.winnerDisplay.textContent=`${r} wins by forfeit!`,e.winnerDialog.showModal()),t&&t()})}(),{handleAttacks:function(){s.gridContainer.addEventListener("click",e=>{if(a&&!o&&i===n.player1Name&&e.target.classList.contains("grid-cell")&&!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){o=!0;const n=parseInt(e.target.dataset.x),t=parseInt(e.target.dataset.y),r=s.gameBoard.receiveAttack(n,t);"hit"===r.result?(e.target.classList.add("hit"),H(s.gridContainer,r.ship,r.cellIndex)):"miss"===r.result&&e.target.classList.add("miss"),setTimeout(()=>{l()},1e3)}}),r.gridContainer.addEventListener("click",e=>{if(a&&!o&&i===n.player2Name&&e.target.classList.contains("grid-cell")&&!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){o=!0;const n=parseInt(e.target.dataset.x),t=parseInt(e.target.dataset.y),a=r.gameBoard.receiveAttack(n,t);"hit"===a.result?(e.target.classList.add("hit"),H(r.gridContainer,a.ship,a.cellIndex)):"miss"===a.result&&e.target.classList.add("miss"),setTimeout(()=>{l()},1e3)}})},setupPlayer2ShipPlacement:function(){if(e.enemyDeployment){e.enemyDeployment.innerHTML=`\n        <div class="grid-container">\n          <div class="grid-container-player-2 grid"></div>\n          <div class="button-container">\n            <div class="random-placement">\n              <button class="random-placement-btn-p2 clickable">Random Placement</button>\n            </div>\n          </div>\n        </div>\n        <div class="enemy-ship-placement">\n          <div class="enemy-space-port">\n            <div class="ship-class">\n              <div class="ship" data-ship-name="Dreadnought" draggable="true" data-ship-size="5" data-ship-direction="horizontal"></div>\n              <button class="rotate-ship"><img src="${R}" alt="Rotate Ship"></button>\n            </div>\n            <div class="ship-class">\n              <div class="ship" data-ship-name="Battlecruiser" draggable="true" data-ship-size="4" data-ship-direction="horizontal"></div>\n              <button class="rotate-ship"><img src="${R}" alt="Rotate Ship"></button>\n            </div>\n            <div class="ship-class">\n              <div class="ship" data-ship-name="Heavy Cruiser" draggable="true" data-ship-size="3" data-ship-direction="horizontal"></div>\n              <button class="rotate-ship"><img src="${R}" alt="Rotate Ship"></button>\n            </div>\n            <div class="ship-class">\n              <div class="ship" data-ship-name="Stealth Frigate" draggable="true" data-ship-size="3" data-ship-direction="horizontal"></div>\n              <button class="rotate-ship"><img src="${R}" alt="Rotate Ship"></button>\n            </div>\n            <div class="ship-class">\n              <div class="ship" data-ship-name="Interceptor" draggable="true" data-ship-size="2" data-ship-direction="horizontal"></div>\n              <button class="rotate-ship"><img src="${R}" alt="Rotate Ship"></button>\n            </div>\n          </div>\n        </div>\n      `;const n=e.enemyDeployment.querySelector(".grid-container-player-2"),t=e.enemyDeployment.querySelector(".enemy-space-port"),r=e.enemyDeployment.querySelector(".random-placement-btn-p2");P(n),s.gridContainer=n,E(t),$(t,n,s.gameBoard),q(n,s.gameBoard),r&&M(r,s.gameBoard,n,t)}},showPlayer2Placement:function(){c(n.player2Name,()=>{const t=document.querySelector(".player-deployment"),r=document.querySelector(".user");t&&(t.style.display="none"),r&&(r.textContent=`${n.player2Name}, place your ships`),e.enemyDeployment&&(e.enemyDeployment.style.display="flex")})},startGame:function(){document.querySelectorAll(".ship").forEach(e=>e.remove()),a=!0,c(n.player1Name,()=>{i=n.player1Name,d(),p()})},player1:r,player2:()=>s,destroy:function(){r.gridContainer&&r.gridContainer.parentNode&&r.gridContainer.parentNode.replaceChild(r.gridContainer.cloneNode(!0),r.gridContainer),s.gridContainer&&s.gridContainer.parentNode&&s.gridContainer.parentNode.replaceChild(s.gridContainer.cloneNode(!0),s.gridContainer)}}}(e,n,X),G.setupPlayer2ShipPlacement()):G=function(e,n,t){const r=function(){const e=document.querySelector(".space-port"),n=document.querySelector(".grid-container-player"),t=new x,r=document.querySelector(".random-placement-btn");return E(e),M(r,t,n,e),$(e,n,t),q(n,t),P(n),{gameBoard:t,gridContainer:n,spacePort:e}}(),a=function(){const e=document.querySelector(".grid-container-2"),n=new x;return P(e),function(e){const n=w.map(e=>new v(e.name,e.size));e.placeShipsRandomly(n)}(n),{gameBoard:n,gridContainer:e}}(),i=function(){let e=[];const n=()=>{let t,a;if(e.length>0){const n=e.shift();t=n.x,a=n.y}else{let e=0;do{t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),e++}while(("hit"===r.gameBoard.board[t][a]||"miss"===r.gameBoard.board[t][a]||e<50&&(t+a)%2!=0)&&e<100)}const i=r.gameBoard.receiveAttack(t,a);if("already_attacked"===i.result)return n();const o=r.gridContainer.querySelector(`[data-x="${t}"][data-y="${a}"]`);if(!o)return{hit:!1};if("hit"===i.result)if(o.classList.add("hit"),H(r.gridContainer,i.ship,i.cellIndex),i.ship.isSunk())e=[];else{const n=[{x:t-1,y:a},{x:t+1,y:a},{x:t,y:a-1},{x:t,y:a+1}].filter(e=>e.x>=0&&e.x<10&&e.y>=0&&e.y<10&&"hit"!==r.gameBoard.board[e.x][e.y]&&"miss"!==r.gameBoard.board[e.x][e.y]);e.unshift(...n)}else"miss"===i.result&&o.classList.add("miss")};return{makeSmartAttack:n}}();let o=!1,s=n.player1Name;function l(){return r.gameBoard.allShipsSunk()?(c("enemy"),!0):!!a.gameBoard.allShipsSunk()&&(c("player"),!0)}function c(r){o=!1;const a="player"===r?n.player1Name:n.player2Name;e.winnerDisplay&&e.winnerDialog&&(e.winnerDisplay.textContent=`${a} wins!`,e.winnerDialog.showModal()),"player"===r&&t&&t()}return function(){const t=document.querySelector(".forfeit-btn");t&&t.addEventListener("click",()=>{if(s!==n.player1Name)return;o=!1;const t=n.player2Name;e.winnerDisplay&&e.winnerDialog&&(e.winnerDisplay.textContent=`${t} wins by forfeit!`,e.winnerDialog.showModal())})}(),{handleAttacks:function(){a.gridContainer.addEventListener("click",t=>{if(o&&s===n.player1Name&&t.target.classList.contains("grid-cell")&&!t.target.classList.contains("hit")&&!t.target.classList.contains("miss")){const r=parseInt(t.target.dataset.x),c=parseInt(t.target.dataset.y),d=a.gameBoard.receiveAttack(r,c);"hit"===d.result?t.target.classList.add("hit"):"miss"===d.result&&t.target.classList.add("miss"),l()||(s=n.player2Name,e.currentPlayerTurn&&(e.currentPlayerTurn.textContent=`${n.player2Name}'s turn`),setTimeout(()=>{o&&(i.makeSmartAttack(),l()||(s=n.player1Name,e.currentPlayerTurn&&(e.currentPlayerTurn.textContent=`${n.player1Name}'s turn`)))},1e3))}})},startGame:function(){o=!0,s=n.player1Name,e.currentPlayerTurn&&(e.currentPlayerTurn.textContent=`${n.player1Name}'s turn`),document.querySelectorAll(".ship").forEach(e=>e.setAttribute("draggable","false"))},player:r,enemy:a,destroy:function(){a.gridContainer&&a.gridContainer.parentNode.replaceChild(a.gridContainer.cloneNode(!0),a.gridContainer)}}}(e,n,X),G.handleAttacks&&G.handleAttacks(),window.buttonsToDisplay=F}!function(){const e={loadingScreen:_(".loading-screen"),main:_(".main"),gameModeSelectionScreen:_(".game-mode-selection-screen"),nameScreen:_(".name-screen"),shipPlacementScreen:_(".ship-placement-screen"),shipPlacementHeader:_(".ship-placement-header"),userPlacementScreen:_(".user-ship-placement"),enemyDeployment:_(".enemy-deployment"),turnsController:_(".turns-controller"),rulesDialog:_(".rules-dialog"),beginMission:_(".continue-btn"),currentPlayerTurn:_(".current-player-turn"),endGame:_(".end"),viewRulesBtn:_(".show-rules-btn"),winnerDisplay:_(".winner"),winnerDialog:_(".finish"),shipDeploymentTitle:_(".ship-placement-title"),restartButton:_(".restart"),endGame:_(".end"),passDeviceDialog:_(".pass-device-dialog"),passDeviceText:_(".pass-device-text"),passDeviceBtn:_(".pass-device-btn")};let n={player1Name:"Player 1",player2Name:"Computer"};!function(e){sessionStorage.getItem("skipLoading")?(sessionStorage.removeItem("skipLoading"),e.loadingScreen.style.display="none",e.gameModeSelectionScreen.style.display="flex"):(e.loadingScreen.style.display="flex",setTimeout(()=>{e.loadingScreen.style.display="none",e.gameModeSelectionScreen.style.display="flex"},6e3))}(e),function(e){e.gameModeSelectionScreen.addEventListener("click",n=>{if(n.target.closest(".single-player")||n.target.closest(".multi-player")){j=null!==n.target.closest(".multi-player"),e.gameModeSelectionScreen.style.display="none",e.nameScreen.style.display="flex";const t=_(".player2-name-input");t&&(t.style.display=j?"block":"none",t.required=j)}})}(e),function(e,n){const t=_(".name-form"),r=_(".player1-name-input"),a=_(".player2-name-input");t.addEventListener("submit",t=>{t.preventDefault(),r?.value.trim()&&(n.player1Name=O(r.value.trim())),j&&a?.value.trim()&&(n.player2Name=O(a.value.trim())),e.main.style.background="white",e.nameScreen.style.display="none",e.rulesDialog.showModal()})}(e,n),function(e,n){e.beginMission.addEventListener("click",()=>{const t=_(".user");t&&(t.textContent=`${n.player1Name}, place your ships`),e.shipPlacementHeader.style.display="flex",e.shipPlacementScreen.style.display="flex",e.userPlacementScreen.style.display="flex",e.rulesDialog.close();const r=_(".player-deployment");r&&(r.innerHTML=document.getElementById("ship-placement-template").innerHTML,r.style.display="flex"),U(e,n)})}(e,n),function(e,n){e.restartButton&&e.restartButton.addEventListener("click",()=>{Y&&clearInterval(Y),function(e,n){G&&G.destroy&&G.destroy(),G=null,function(e,n){const t=_(".player-deployment");if(t&&(t.innerHTML=document.getElementById("ship-placement-template").innerHTML,t.style.display="flex"),e.enemyDeployment){const n=e.enemyDeployment.querySelector(".grid-container-2");n&&(n.innerHTML="")}e.shipDeploymentTitle&&(e.shipDeploymentTitle.style.display="block"),e.turnsController&&(e.turnsController.style.display="none"),e.enemyDeployment&&(e.enemyDeployment.style.display="none"),e.shipPlacementHeader&&(e.shipPlacementHeader.style.display="flex"),e.shipPlacementScreen&&(e.shipPlacementScreen.style.display="flex"),e.userPlacementScreen&&(e.userPlacementScreen.style.display="flex");const r=_(".user.text");r&&(r.textContent=`${n.player1Name}, place your ships`),e.winnerDialog&&e.winnerDialog.close()}(e,n),U(e,n)}(e,n)})}(e,n);const t=function(e){return document.addEventListener("click",n=>{if(n.target.classList.contains("start-btn"))if(e.shipDeploymentTitle&&(e.shipDeploymentTitle.style.display="none"),document.querySelectorAll(".button-container").forEach(e=>e.remove()),j)j&&(e.userPlacementScreen.style.display="none",e.turnsController.style.display="flex",G.startGame());else{const n=document.querySelector(".enemy-ship-placement");n&&n.remove(),e.enemyDeployment.style.display="flex",e.userPlacementScreen.style.display="none",e.turnsController.style.display="flex",G.startGame()}n.target.closest(".pass-to-p2-btn")&&G&&G.showPlayer2Placement()}),{setupStartButton:()=>{}}}(e);window.setupStartButton=t.setupStartButton,e.viewRulesBtn&&e.viewRulesBtn.addEventListener("click",()=>{const n=_(".rules-footer");n&&(n.style.display="none"),e.rulesDialog&&(e.rulesDialog.setAttribute("closedby","any"),e.rulesDialog.showModal())}),function(e){e.endGame&&e.endGame.addEventListener("click",()=>{sessionStorage.setItem("skipLoading","true"),location.reload()})}(e)}()})();